/* Plugin generated by AMXX-Studio */

#include < amxmodx >
#include < amxmisc >
#include < fakemeta >
#include < engine >
#include < hamsandwich >
#include < zombieplague >
#include < dhudmessage >
#include < xs >

#define PLUGIN 		"[Avatar] +50 Kevlaru"
#define VERSION 	"0.3"
#define AUTHOR 		"adamCSzombie"

#define ITEM_COST	50
#define	EXTRA_ITEM	"+50 Kevlaru"

new g_kevlar[ 33 ], g_kevlar_av;


public plugin_init( ) 
{
	RegisterHam( Ham_Spawn, "player", "spawn_hraca",1 );
	
	register_plugin( PLUGIN, VERSION, AUTHOR );
	
	g_kevlar_av 		= zp_register_extra_item( EXTRA_ITEM, ITEM_COST, ZP_TEAM_HUMAN );
	
}

public client_putinserver( id ) g_kevlar[ id ] = false;

public client_disconnect( id ) g_kevlar[ id ] = false;

public spawn_hraca( id ) g_kevlar[ id ] = false;

public zp_extra_item_selected( player, itemid )
{
	if ( itemid == g_kevlar_av )
	{
		if ( g_kevlar[ player ] )
		{
			client_cmd( player, "spk valve/sound/buttons/button11" );
			ChatColor( player, "!g[Avatar]!y Tento item mozes kupit iba raz!" );
			return ZP_PLUGIN_HANDLED;		
		}
		
		g_kevlar[ player ] = true;
		set_pev( player, pev_armorvalue, float( min( pev( player, pev_armorvalue ) + 50, 999 ) ) );
		
	}
	return PLUGIN_CONTINUE;
}