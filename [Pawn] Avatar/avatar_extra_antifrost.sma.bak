/* Plugin generated by AMXX-Studio */

#include < amxmodx >
#include < amxmisc >
#include < fakemeta >
#include < engine >
#include < hamsandwich >
#include < zombieplague >
#include < dhudmessage >
#include < xs >

#define PLUGIN 		"[Avatar] Anti-Frost"
#define VERSION 	"0.3"
#define AUTHOR 		"adamCSzombie"

#define ITEM_COST	10
#define	EXTRA_ITEM	"Anti-Frost"

new g_antifrost[ 33 ], g_cooldown[ 33 ], i_cooldown_time[ 33 ], g_itemid, g_iHudSync;
new Float:anti_frost = 30.0;

public plugin_init( ) 
{
	register_plugin( PLUGIN, VERSION, AUTHOR );
	
	g_itemid 		= zp_register_extra_item( EXTRA_ITEM, ITEM_COST, ZP_TEAM_ZOMBIE );
	g_iHudSync		= CreateHudSyncObj( );
	
}

public zp_extra_item_selected( player, itemid )
{
	if ( itemid == g_itemid )
	{
		if ( g_hasbazooka[ player ] )
		{
			client_cmd( player, "spk valve/sound/buttons/button11" );
			ChatColor( player, "!g[Avatar]!y Uz mas zakupeny Anti-Frost!" );
			return ZP_PLUGIN_HANDLED;		
		}
			g_cooldown[ player ] = 1;
			ChatColor( player, "!g[Avatar]!y Ziskal si imunitu voci Frost Grenade na 30 sekund!" );
	}
	return PLUGIN_CONTINUE;
}

public ShowHUD( id )
{
	if( !g_hasbazooka[ id ] || CanShoot[ id ] || !is_user_alive( id ) )
		return;
	
	if( i_cooldown_time[ id ] >= 0 )
	{
		i_cooldown_time[ id ] = i_cooldown_time[ id ] - 1;
		set_hudmessage( 200, 200, 0, 0.75, 0.92, 0, 1.0, 1.1, 0.0, 0.0, -1 );
		ShowSyncHudMsg( id, g_iHudSync, "Anti-Frost imunita: %d sec.",i_cooldown_time[ id ] );
	}
	else
	{
		client_print( id, print_center, "Anti-Frost vyprsal!" );
	}
}
/* AMXX-Studio Notes - DO NOT MODIFY BELOW HERE
*{\\ rtf1\\ ansi\\ deff0{\\ fonttbl{\\ f0\\ fnil Tahoma;}}\n\\ viewkind4\\ uc1\\ pard\\ lang1051\\ f0\\ fs16 \n\\ par }
*/
